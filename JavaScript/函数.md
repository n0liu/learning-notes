# ðŸ‘å‡½æ•°ä¸­çš„thiså…³é”®å­—
> å¯¹äºŽjavascriptå‡½æ•°ä¸­çš„thisï¼Œè¿™é‡Œå…ˆç»™å‡ºä¸‰ä¸ªå®šå¾‹ï¼š

### å®šå¾‹
âš«ï¸ æ™®é€šå‡½æ•°ä¸­çš„thisï¼Œå®šä¹‰æ—¶æœªçŸ¥ï¼›è¿è¡Œæ—¶ï¼ŒthisæŒ‡å‘è¯¥å‡½æ•°çš„è°ƒç”¨æ–¹
ðŸŸ¢ ç®­å¤´å‡½æ•°ä¸­çš„thisï¼Œå®šä¹‰æ—¶ï¼Œå·²æ˜Žç¡®thisæŒ‡å‘ï¼ŒæŒ‡å‘è¯¥ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„this
ðŸŸ  æ™®é€šå‡½æ•°å®žä¾‹åŒ–ï¼Œæž„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘å¯¹åº”å®žä¾‹ã€‚
#### ç¤ºä¾‹ðŸ’»
```javascript
var x = 0;
function Foo () {
  this.x = 1;
}
Foo.prototype.print = function () {
  console.log(this);
  console.log(this.x);
  (function () {
    console.log(this);
    console.log(this.x)
  })()
}

let foo = new Foo();
foo.print.call({x: 2});
```
```javascript
var x = 0;
function Foo () {
  this.x = 1;
}
Foo.prototype.print = () => {
  console.log(this);
  console.log(this.x);
  (function () {
    console.log(this);
    console.log(this.x)
  })()
}

let foo = new Foo();
foo.print.call({x: 2});
```
### ðŸ“– Apply
> æ˜Žç¡®åŽŸå‡½æ•°ä¸­çš„thisæŒ‡å‘ï¼ŒåŒæ—¶ä¼ å‚(å‚æ•°å½¢å¼ç”¨æ•°ç»„è¡¨ç¤º)ï¼Œå¹¶è§¦å‘åŽŸå‡½æ•°è°ƒç”¨ã€‚

```javascript
Function.prototype.myApply = function(thisObj, args){
  Object.prototype.runOuterMethod = this;
  thisObj.runOuterMethod(...args)
  delete Object.prototype.runOuterMethod;
}
```
### ðŸŽ¹ Call 
> æ˜Žç¡®åŽŸå‡½æ•°ä¸­çš„thisæŒ‡å‘ï¼ŒåŒæ—¶ä¼ å‚(å‚æ•°å½¢å¼ç”¨å±•å¼€æ•°ç»„è¡¨ç¤º)ï¼Œå¹¶è§¦å‘åŽŸå‡½æ•°è°ƒç”¨ã€‚

```javascript
Function.prototype.myCall = function(...args){
  const thisObj = args[0]; //this
  args.splice(0,1);
  Object.prototype.runOuterMethod = this;
  thisObj.runOuterMethod(...args)
  delete Object.prototype.runOuterMethod;
}
```
### ðŸŽµ Bind
> æ˜Žç¡®åŽŸå‡½æ•°ä¸­çš„thisæŒ‡å‘ï¼ŒåŒæ—¶ä¼ å‚(å‚æ•°å½¢å¼ç”¨å±•å¼€æ•°ç»„è¡¨ç¤º)/ä¼ é€’éƒ¨åˆ†å‚æ•°ï¼Œ
> å¹¶è¿”å›žä¸€ä¸ªæ–°å‡½æ•°(å¯ä¼ é€’å‰©ä½™å‚æ•°)ã€‚

```javascript
Function.prototype.myBind = function(...args){
  const thisObj = args[0]; //this
  args.splice(0,1);
  Object.prototype.runOuterMethod = this;
  return function(...params){
    thisObj.runOuterMethod(...(args.concat(params)))
    delete Object.prototype.runOuterMethod;
  }

}
```
# ðŸ‰é«˜é˜¶å‡½æ•°
> å¸¸ç”¨çš„é«˜é˜¶å‡½æ•° mapã€everyã€some 

1. å‡½æ•°ä½œä¸ºå‚æ•°
```javascript
const forEach=(arr, fn) => {
  for(const item of arr) fn(item);
}
```

2. å‡½æ•°ä½œä¸ºè¿”å›žå€¼
```javascript
const once = (fn) => {
  let done = false;
  return (...args) => {
    if(!done){
      done = true
      return fn.apply(this, args);
    }else{
      return "å·²ç»æ”¯ä»˜è¿‡äº†"
    }
  }
}
const pay = once((money)=>{
  return ("æ”¯ä»˜äº†ï¼š"+money)
})
console.log(pay(100));
console.log(pay(100));
console.log(pay(100));
```
## æ„ä¹‰ðŸ“¢
å¸®åŠ©æˆ‘ä»¬å±è”½å…·ä½“ä¸šåŠ¡é€»è¾‘å®žçŽ°çš„ç»†èŠ‚ï¼Œå°†å¤æ‚çš„é€»è¾‘ç¼–å†™åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå…·ä½“çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œæ ¹æ®åŠŸèƒ½æ¥è°ƒç”¨ä¸åŒçš„å‡½æ•°å³å¯ã€‚é«˜é˜¶å‡½æ•°å°±æ˜¯å¸®åŠ©æˆ‘ä»¬æŠ½è±¡è¿™äº›ç»†èŠ‚ï¼Œå¦‚forEachä¸­çš„forå¾ªçŽ¯ç»†èŠ‚
# ðŸ§…å‡½æ•°ç»„åˆ
> å¦‚æžœä¸€ä¸ªå‡½æ•°Açš„è°ƒç”¨ç»“æžœæ˜¯å¦ä¸€ä¸ªå‡½æ•°Bçš„å‚æ•°ï¼Œè€ŒBçš„è°ƒç”¨ç»“æžœåˆæ˜¯å‡½æ•°Cçš„å‚æ•°ï¼ŒCçš„è°ƒç”¨ç»“æžœåˆæ˜¯å‡½æ•°Dçš„å‚æ•°ï¼ŒDçš„è°ƒç”¨ç»“æžœåˆæ˜¯... ... ... 
> ä½ å°†çœ‹åˆ°çš„æ˜¯ï¼š F(E(D(C(B(A()))))); âš ï¸âš ï¸âš ï¸

ðŸ¥¬ ä¸ºäº†è§£å†³ä¸Šé¢è¿‡æ·±çš„å‡½æ•°åµŒå¥—ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨ä¸‹é¢è¿™ç§ç¼–ç é£Žæ ¼æ¥è§„é¿æŽ‰ä¸Šé¢çš„æ— é™åµŒå¥—ï¼š
```typescript
const ä¹°èœA = èœ => ä¹°æ¥çš„èœðŸ¥¦
const æ´—èœB = ä¹°æ¥çš„èœ => æ´—å¥½çš„èœðŸ¥¦ðŸ’¦
const ç‚’èœC = æ´—å¥½çš„èœ => ç‚’å¥½çš„èœðŸ²
// å¸¸è§„åµŒå¥—è°ƒç”¨æ–¹å¼ï¼š
C(B(A(èœ)));       
// æœŸæœ›çš„è°ƒç”¨æ–¹å¼ï¼šæé«˜ä»£ç å¯è¯»æ€§
cooking(A,B,C)(èœ);
```
## ðŸ¤–ï¸å‡½æ•°ç»„åˆç”Ÿæˆå™¨
> pipe: æ ¹æ®å‚æ•°ä¼ é€’çš„é¡ºåºè¿›è¡Œä¾æ¬¡è°ƒç”¨
> compose: æ ¹æ®å‚æ•°ä¼ é€’çš„é€†åºè¿›è¡Œä¾æ¬¡è°ƒç”¨

### pipe â›²ï¸
```javascript
const pipe = (...args) => (param) => args.reduce((result, item) => item(result), param);
```
### compose ðŸª€
```javascript
const compose = (...args) => (param) => args.reverse().reduce((result, item) => item(result), param);
```
# é¢å‘è¿‡ç¨‹ç¼–ç¨‹
> åˆ†æžå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶åŽç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®žçŽ°ï¼Œä½¿ç”¨çš„æ—¶å€™è¿›è¡Œä¾æ¬¡è°ƒç”¨ã€‚
> å¯ç»´æŠ¤æ€§å·®ã€å¯æ‰©å±•æ€§å·®

```javascript
// æ­¥éª¤1
const createDom = (name) => document.createElement(name);
// æ­¥éª¤2
const addText = (dom, text) => dom.innerText = text
// æ­¥éª¤3
const addDomInBody = (dom) => document.body.appendChild(dom)

// ä¸»å‡½æ•°ä¸­è°ƒç”¨
function main(){
  const div = createDom('div')
  addText(div, "divå…ƒç´ ");
  addDomInBody(div);
}
```
# å‡½æ•°å¼ç¼–ç¨‹FP
> å¯¹è¿ç®—è¿‡ç¨‹åšå‡ºä¸€å®šçš„æŠ½è±¡
> æŸ¯é‡ŒåŒ–åŽçš„å‡½æ•°ï¼ˆå°†å¤šå…ƒå‡½æ•°è½¬åŒ–ä¸ºä¸€å…ƒå‡½æ•°ï¼‰ï¼Œæ–¹ä¾¿å¯¹å‚æ•°åšç»†ç²’åº¦çš„å°è£…ã€‚
> å¯ç»´æŠ¤æ€§å¼ºã€å¯æ‰©å±•æ€§å¼ºã€å¯å¤ç”¨æ€§å¼º

å‡½æ•°è¿è¡Œçš„ç»“æžœåªä¾èµ–äºŽè¾“å…¥çš„å‚æ•°ï¼Œè€Œä¸ä¾èµ–äºŽå¤–éƒ¨çŠ¶æ€ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¸¸å¸¸è¯´å‡½æ•°å¼ç¼–ç¨‹æ²¡æœ‰å‰¯ä½œç”¨ã€‚
æ²¡æœ‰å‰¯ä½œç”¨æœ‰ä¸ªå·¨å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å‡½æ•°å†…éƒ¨æ— çŠ¶æ€ï¼Œå³è¾“å…¥ç¡®å®šï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œå®¹æ˜“æµ‹è¯•å’Œç»´æŠ¤ã€‚
```javascript
function makeDom(name,text) {
  const dom = document.createElement(name);
  dom.innerText = text;
  document.body.appendChild(dom);
}
makeDom('button','BUTTON')
```
## çº¯å‡½æ•°
> å›ºå®šçš„è¾“å…¥ï¼Œæœ‰å›ºå®šçš„è¾“å‡ºï¼ŒåŒæ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨ç»“æžœä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨

```javascript
// éžçº¯å‡½æ•°,å¸¦æœ‰å‰¯ä½œç”¨
let num = 18;
function moreThan18 (age){
  return age>=num;
}
// çº¯å‡½æ•°
function moreThan18(age){
  const num = 18;
  return age>=num;
}
```
## åå‡½æ•°
> å‡½æ•°
> partial application
> å›ºå®šä¸€ä¸ªå‡½æ•°çš„ä¸€äº›å‚æ•°ï¼Œç„¶åŽäº§ç”Ÿå¦ä¸€ä¸ªæ›´å°å…ƒçš„å‡½æ•°

```javascript
// åŽŸå‡½æ•°
function makeDom(name,text,style) {
  const dom = document.createElement(name);
  dom.innerText = text;
  Object.assign(dom.style,style)
  document.body.appendChild(dom);
}
// åå‡½æ•°
function makeDomCury(name) {
  const dom = document.createElement(name);
  return function(text){
    dom.innerText = text;
    return function (style) {
      Object.assign(dom.style,style)
      document.body.appendChild(dom);
    }
  }
}
```
## æŸ¯é‡ŒåŒ–
> æŠ€æœ¯
> å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯ï¼ˆå¤šå…ƒå‡½æ•°è½¬ä¸ºä¸€å…ƒå‡½æ•°çš„æŠ€æœ¯ï¼‰
> æŸ¯é‡ŒåŒ–å¯ä»¥å®žçŽ°åå‡½æ•°ç”Ÿæˆå‡½æ•°

```javascript
const curry = (fn) => function fun(...args) {
  if (args.length < fn.length) {
    return (...others) => fun(...(args.concat(others)))
  } 
  return fn(...args)
}
```
## [point free](http://www.ruanyifeng.com/blog/2017/03/pointfree.html)
> ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹é£Žæ ¼
> ä¸å…³å¿ƒæ‰€è¦å¤„ç†çš„ä¸­é—´å€¼ï¼Œåªåˆæˆè¿ç®—è¿‡ç¨‹ï¼Œä»Žè€ŒèŽ·å¾—è¿ç®—ç»“æžœã€‚
> pipeå‡½æ•°ã€composeå‡½æ•° æ˜¯è¯¥ç¼–ç¨‹é£Žæ ¼çš„ä¸€ç§ä½“çŽ°ã€‚


## å‡½æ•°å¼ç¼–ç¨‹å¸¸ç”¨çš„åº“
#### l[odash](https://lodash.com/)
```javascript
const _ = require('lodash')
function add(a,b,c) {
  return a+b+c
}
const add_curry = _.curry(add);
console.log(add_curry(1)(3)(2))
```
#### [ramda](https://ramdajs.com/)
> Ramda çš„æ•°æ®ä¸€å¾‹æ”¾åœ¨æœ€åŽä¸€ä¸ªå‚æ•°ï¼Œç†å¿µæ˜¯"function firstï¼Œdata last"
> æ‰€æœ‰æ–¹æ³•éƒ½æ”¯æŒæŸ¯é‡ŒåŒ–

```javascript
const R = require('ramda')
console.log(R.lt(2,1))
```
## å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹
### ä¼˜ç‚¹
ç®¡ç†çŠ¶æ€ï¼šå› ä¸ºå®ƒçš„å®—æ—¨æ˜¯æ— çŠ¶æ€ï¼Œæˆ–è€…è¯´æ›´å°‘çš„çŠ¶æ€ï¼Œèƒ½æœ€å¤§åŒ–çš„å‡å°‘è¿™äº›æœªçŸ¥ã€ä¼˜åŒ–ä»£ç ã€å‡å°‘å‡ºé”™æƒ…å†µï¼›
æ›´ç®€å•çš„å¤ç”¨ï¼šå›ºå®šè¾“å…¥->å›ºå®šè¾“å‡ºï¼Œæ²¡æœ‰å…¶ä»–å¤–éƒ¨å˜é‡å½±å“ï¼Œå¹¶ä¸”æ— å‰¯ä½œç”¨ã€‚è¿™æ ·ä»£ç å¤ç”¨æ—¶ï¼Œå®Œå…¨ä¸éœ€è¦è€ƒè™‘å®ƒçš„å†…éƒ¨å®žçŽ°å’Œå¤–éƒ¨å½±å“
æ›´ä¼˜é›…çš„ç»„åˆï¼šæ›´å¼ºçš„å¤ç”¨æ€§ï¼Œå¸¦æ¥æ›´å¼ºå¤§çš„ç»„åˆæ€§
### ç¼ºç‚¹
æ€§èƒ½ï¼šå¯èƒ½ä¼šå¯¹ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿‡åº¦åŒ…è£…ï¼Œä»Žè€Œäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ€§èƒ½å¼€é”€
èµ„æºå ç”¨ï¼šåœ¨ JS ä¸­ä¸ºäº†å®žçŽ°å¯¹è±¡çŠ¶æ€çš„ä¸å¯å˜ï¼Œå¾€å¾€ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œå®ƒå¯¹åžƒåœ¾å›žæ”¶æ‰€äº§ç”Ÿçš„åŽ‹åŠ›è¿œè¿œè¶…è¿‡å…¶ä»–ç¼–ç¨‹æ–¹å¼
é€’å½’é™·é˜±ï¼šåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†å®žçŽ°è¿­ä»£ï¼Œé€šå¸¸ä¼šé‡‡ç”¨é€’å½’æ“ä½œã€‚
# é¢å‘å¯¹è±¡ç¼–ç¨‹OOP
> å¯¹çŽ°å®žä¸­çš„äº‹ç‰©åšæŠ½è±¡ï¼Œé€šè¿‡ä¸åŒå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å®Œæˆéœ€æ±‚å¼€å‘ã€‚
> å°è£…ã€ç»§æ‰¿ã€å¤šæ€ æ˜¯é¢å‘å¯¹è±¡çš„æ ¸å¿ƒã€‚
> å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§ã€å¯å¤ç”¨æ€§ çš†ä¼˜

é€šè¿‡å¯¹ä¸šåŠ¡ä¸­ä¸åŒçš„å¯¹è±¡èŒè´£ä½œå‡ºæŠ½è±¡ï¼Œæ˜Žç¡®æ¯ä¸ªå¯¹è±¡ä¸­çš„å±žæ€§åŠæ–¹æ³•ï¼Œä»¥åŠå¯¹è±¡ä¸Žå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ˆä¸€èˆ¬æ˜¯ä»¥æŽ¥å£çš„å½¢å¼è¡¨çŽ°ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»Žå®è§‚ä¸Šå¾—çŸ¥å½“å‰ä¸šåŠ¡åœºæ™¯ä¸‹å„ä¸ªå¯¹è±¡çš„åä½œå…³ç³»äº†ã€‚æ›´åŠ æ˜Žç¡®å½“å‰ä¸šåŠ¡åœºæ™¯çš„å®žçŽ°æ–¹å¼ã€‚åœ¨å¼€å‘å‰æ˜Žç¡®äº†ä¾èµ–å…³ç³»ä¹‹åŽï¼Œå¤šäººå¼€å‘çš„æ—¶å€™ï¼Œåªéœ€è¦æ ¹æ®å¯¹è±¡çš„ä¾èµ–å›¾å³å¯å®žçŽ°åˆ†å·¥åä½œï¼Œäº’ä¸å½±å“ã€‚
```javascript
class DomCreator {
  dom = document.createElement('div');
  createDom = (name) => this.dom = document.createElement(name);
  addText = (text) => this.dom.innerText = text;
  addDomInBody = () => document.body.appendChild(this.dom)
}

const btn = new DomCreator();
btn.createDom('button');
btn.addText('Button');
btn.addDomInBody();
```
# ç¤ºä¾‹ä»£ç 
```javascript
const createDom = (name) => document.createElement(name);
const addText = (dom, text) => dom.innerText = text
const addStyle = (dom, style) => Object.assign(dom.style, style);
// const addEvent = (dom,eventName,event) => dom.addEventListener(eventName,event);
const addDomInBody = (dom) => document.body.appendChild(dom)

const div = createDom('div')
addText(div, "divå…ƒç´ ");
addStyle(div,{color: 'red'})
// addEvent(div,'click',()=>console.log("div"))
addDomInBody(div);

// ========================== å‡½æ•°å¼ç¼–ç¨‹ ======================
// function makeDom(name,text,style) {
//   const dom = document.createElement(name);
//   dom.innerText = text;
//   Object.assign(dom.style,style)
//   document.body.appendChild(dom);
// }
// makeDom('button','Button',{color:'red'})

// function makeDomCury(name) {
//   const dom = document.createElement(name);
//   return function(text){
//     dom.innerText = text;
//     return function (style) {
//       Object.assign(dom.style,style)
//       document.body.appendChild(dom);
//     }
//   }
// }
// makeDomCury('button')('BUTTON')({color:"blue"})


// ======================== é¢å‘å¯¹è±¡ ===========================

// class DomCreator {
//   dom = document.createElement('div');
//   createDom = (name) => this.dom = document.createElement(name);
//   addText = (text) => this.dom.innerText = text;
//   addDomInBody = () => document.body.appendChild(this.dom)
// }
//
// class DomCreatorWithStyle extends DomCreator{
//   addStyle = (style) => Object.assign(this.dom.style, style);
// }
// class DomCreatorWithEvent extends DomCreatorWithStyle{
//   addEvent = (eventName,event) => this.dom.addEventListener(eventName,event);
// }
// class RedBtn extends DomCreatorWithEvent{
//   dom = document.createElement('button');
//   getBtn = ()=>{
//     this.addText('Button');
//     this.addStyle({color: 'red'})
//     this.addEvent('click',()=>console.log("btn!"))
//   }
// }
//
// const btn = new RedBtn();
// btn.getBtn()
// btn.addDomInBody();



```

